(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-list"],{"030f":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n}));var n={mixNavBar:a("87bd").default,mixLoading:a("50c5").default,mixModal:a("53f7").default,mixActionSheet:a("9bfd").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"app"},[a("v-uni-view",{staticClass:"nav-wrap"},[a("mix-nav-bar",{attrs:{navs:t.navs,counts:t.navCounts,current:t.navCurrent},on:{onChange:function(e){arguments[0]=e=t.$handleEvent(e),t.onNavBarChange.apply(void 0,arguments)}}})],1),a("mescroll-body",{ref:"mescrollRef",attrs:{top:84,up:t.upOption},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}}},t._l(t.list,(function(e,n){return a("v-uni-view",{key:n,staticClass:"item column",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navTo("detail?id="+e.order_id)}}},[a("v-uni-view",{staticClass:"i-header row b-b"},[a("v-uni-text",{staticClass:"time fill"},[t._v(t._s(t._f("date")(e.add_time,"Y-m-d H:i")))]),a("v-uni-text",{staticClass:"state",class:{gray:5===e.order_status}},[t._v(t._s(e.order_status_desc))])],1),1===e.goods_list.length?a("v-uni-view",{staticClass:"goods-wrap row"},[a("v-uni-view",{staticClass:"image-wrapper lazyload lazypic",class:{loaded:e.loaded}},[a("v-uni-image",{attrs:{src:t.domain+e.goods_list[0].original_img,mode:"aspectFill","lazy-load":"true"},on:{load:function(a){arguments[0]=a=t.$handleEvent(a),t.imageOnLoad(e)}}})],1),a("v-uni-view",{staticClass:"right column"},[a("v-uni-text",{staticClass:"title clamp"},[t._v(t._s(e.goods_list[0].goods_name))]),a("v-uni-view",{staticClass:"r-b"},[a("v-uni-text",{staticClass:"price"},[t._v("￥"+t._s(e.goods_list[0].goods_price))]),a("v-uni-text",{staticClass:"number"},[t._v("x"+t._s(e.goods_list[0].goods_num))])],1)],1)],1):a("v-uni-scroll-view",{staticClass:"scroll-view",attrs:{"scroll-x":!0}},[a("v-uni-view",{staticClass:"goods-list"},t._l(e.products,(function(n,o){return a("v-uni-view",{key:o,staticClass:"image-wrapper lazyload lazypic",class:{loaded:e.loaded}},[a("v-uni-image",{attrs:{src:n.image,mode:"aspectFill","lazy-load":"true"},on:{load:function(a){arguments[0]=a=t.$handleEvent(a),t.imageOnLoad(e)}}})],1)})),1)],1),a("v-uni-view",{staticClass:"price-wrap"},[a("v-uni-text",[t._v("共"+t._s(e.count_goods_num)+"件 实付:")]),a("v-uni-text",{staticClass:"price"},[t._v("￥"+t._s(e.total_amount))])],1),a("v-uni-view",{staticClass:"btn-group row",on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.stopPrevent.apply(void 0,arguments)}}},["CANCEL"===e.order_status_code||4===e.order_status&&5===e.order_status?a("v-uni-view",{staticClass:"btn center round",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.deleteOrder(e)}}},[a("v-uni-text",[t._v("删除订单")])],1):t._e(),0===e.pay_status&&"CANCEL"!==e.order_status_code?a("v-uni-view",{staticClass:"btn center round",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.cancelOrder(e)}}},[a("v-uni-text",[t._v("取消订单")])],1):t._e(),0===e.pay_status&&"CANCEL"!==e.order_status_code?a("v-uni-view",{staticClass:"btn center",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.pay(e)}}},[a("v-uni-text",[t._v("立即支付")])],1):t._e(),1===e.pay_status&&"REFUND"!==e.order_status_code&&"WAITRECEIVE"!==e.order_status_code?a("v-uni-view",{staticClass:"btn center round",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showRefundAction(e)}}},[a("v-uni-text",[t._v("申请退款")])],1):t._e(),1===e.pay_status&&"WAITRECEIVE"===e.order_status_code?a("v-uni-view",{staticClass:"btn center",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.confirmReceipt(e)}}},[a("v-uni-text",[t._v("确认收货")])],1):t._e()],1)],1)})),1),t.isLoading?a("mix-loading",{attrs:{mask:!0}}):t._e(),a("mix-modal",{ref:"mixModal",attrs:{title:"订单提示",text:t.modalText},on:{onConfirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onModalConfirm.apply(void 0,arguments)}}}),a("mix-action-sheet",{ref:"mixActionSheet",on:{onConfirm:function(e){arguments[0]=e=t.$handleEvent(e),t.refund.apply(void 0,arguments)}}})],1)},i=[]},4068:function(t,e,a){"use strict";var n=a("f78f"),o=a.n(n);o.a},"74b3":function(t,e,a){"use strict";var n=a("ed74"),o=a.n(n);o.a},b0f9:function(t,e,a){"use strict";var n=a("4ea4");a("99af"),a("4160"),a("07ac"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var o=n(a("1da1")),i=n(a("0bad")),r=n(a("393e")),s=n(a("8163")),d=a("5df6"),c={components:{MescrollBody:i.default},mixins:[r.default,s.default],data:function(){return{curPage:"orderList",domain:this.$config.domain,navCounts:[],navs:[{name:"全部"},{name:"待付款"},{name:"待发货"},{name:"待收货"},{name:"待评价"}],navCurrent:0,upOption:{page:{num:0,size:10},noMoreSize:3},modalText:"",list:[]}},computed:{orderCount:function(){return this.$store.state.orderCount}},watch:{orderCount:function(){this.navCounts=[0].concat(Object.values(this.orderCount))}},onLoad:function(t){t.current&&(this.navCurrent=+t.current,this.navCounts=[0].concat(Object.values(this.orderCount)))},onShow:function(){this.loaded&&this.refreshList(!1)},methods:{loadData:function(t){var e=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var n,o,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.mescroll&&e.mescroll.removeEmpty(),n={page:t.num,limit:t.size},o=e.getCurrentStatus(),o.length>0&&(n.type=o),a.next=6,(0,d.getOrders)(n);case 6:i=a.sent,r=i.result.list,e.isLoading=!1,e.loaded=!0,1===t.num&&(e.list=[],e.loaded&&r.forEach((function(t){e.$set(t,"loaded",!0)})),r.length>0&&uni.pageScrollTo({scrollTop:0,duration:0})),e.list=e.list.concat(r),e.mescroll.endSuccess(r.length);case 13:case"end":return a.stop()}}),a)})))()},refreshList:function(t){this.mescroll&&this.mescroll.resetUpScroll(!1),!1!==t&&(this.isLoading=!0)},mescrollInit:function(t){var e=this;this.mescroll=t,setTimeout((function(){e.refreshList()}),10)},onNavBarChange:function(t){this.navCurrent!==t&&(this.navCurrent=t,this.refreshList())},getCurrentStatus:function(){var t=["","WAITPAY","WAITSEND","WAITRECEIVE","WAITCCOMMENT"];return console.log("getCurrentStatus",t[this.navCurrent],this.navCurrent),t[this.navCurrent]}}};e.default=c},b63f:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-05355c90]{background-color:#f7f7f7}body.?%PAGE?%[data-v-05355c90]{background-color:#f7f7f7}",""]),t.exports=e},c0c0:function(t,e,a){"use strict";a.r(e);var n=a("030f"),o=a("d081");for(var i in o)"default"!==i&&function(t){a.d(e,t,(function(){return o[t]}))}(i);a("4068"),a("74b3");var r,s=a("f0c5"),d=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"05355c90",null,!1,n["a"],r);e["default"]=d.exports},d081:function(t,e,a){"use strict";a.r(e);var n=a("b0f9"),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=o.a},e874:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 配色 */.item[data-v-05355c90]{width:%?710?%;padding-bottom:%?24?%;margin-top:%?20?%;margin-left:%?20?%;background-color:#fff;border-radius:%?12?%}.b-b[data-v-05355c90]:after{left:%?4?%;right:%?4?%;border-color:#e5e5e5}.i-header[data-v-05355c90]{height:%?80?%;padding:0 %?24?%;margin-bottom:%?24?%}.i-header .time[data-v-05355c90]{font-size:%?26?%;color:#999}.i-header .state[data-v-05355c90]{font-size:%?30?%;color:#ff536f}.i-header .state.gray[data-v-05355c90]{color:#999}.scroll-view[data-v-05355c90]{width:100%;height:%?150?%}.scroll-view .goods-list[data-v-05355c90]{display:flex}.scroll-view .goods-list[data-v-05355c90]::before, .scroll-view .goods-list[data-v-05355c90]::after{content:"";width:%?20?%;height:%?130?%;flex-shrink:0}.scroll-view .goods-list[data-v-05355c90]::after{width:%?10?%}.scroll-view .goods-list .image-wrapper[data-v-05355c90]{flex-shrink:0;width:%?130?%;height:%?130?%;margin-right:%?16?%;border-radius:%?4?%;overflow:hidden}.scroll-view .goods-list uni-image[data-v-05355c90]{width:100%;height:100%}.goods-wrap[data-v-05355c90]{padding:0 %?20?%;align-items:stretch}.goods-wrap .image-wrapper[data-v-05355c90]{width:%?130?%;height:%?130?%;border-radius:%?4?%;overflow:hidden}.goods-wrap .image-wrapper uni-image[data-v-05355c90]{width:100%;height:100%}.goods-wrap .right[data-v-05355c90]{flex:1;padding-left:%?20?%;overflow:hidden;justify-content:space-between}.goods-wrap .title[data-v-05355c90]{font-size:%?28?%;color:#333}.goods-wrap .attr[data-v-05355c90]{margin:%?16?% 0 %?20?%;min-height:%?30?%;font-size:%?24?%;color:#999}.goods-wrap .r-b[data-v-05355c90]{display:flex;height:%?30?%}.goods-wrap .price[data-v-05355c90]{font-size:%?28?%;color:#333;font-weight:400}.goods-wrap .number[data-v-05355c90]{margin-left:%?16?%;font-size:%?26?%;color:#999}.price-wrap[data-v-05355c90]{display:flex;justify-content:flex-end;padding:%?16?% %?24?% %?30?%;font-size:%?26?%;color:#333}.price-wrap .price[data-v-05355c90]{font-size:%?30?%;font-weight:700}.btn-group[data-v-05355c90]{justify-content:flex-end;padding-right:%?16?%}.btn-group .btn[data-v-05355c90]{width:%?150?%;height:%?60?%;margin-left:%?20?%;font-size:%?24?%;color:#fff;background-color:#ff536f;border-radius:%?100?%}.btn-group .round[data-v-05355c90]{background-color:#fff;color:#333}',""]),t.exports=e},ed74:function(t,e,a){var n=a("e874");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("4f06").default;o("d6a5eb42",n,!0,{sourceMap:!1,shadowMode:!1})},f78f:function(t,e,a){var n=a("b63f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("4f06").default;o("626165b0",n,!0,{sourceMap:!1,shadowMode:!1})}}]);