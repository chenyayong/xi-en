(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chooseAddress-index"],{2949:function(t,e,i){"use strict";var a=i("4ea4");i("4160"),i("d81d"),i("d3b7"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var s=a(i("1da1")),n=a(i("1c05")),o=i("e3b1"),c=new o({key:n.default.qqmapWxKey}),r=null,d={data:function(){return{curCity:"",mapStatus:1,map:{longitude:116.39742,latitude:39.909},room:"",list:[],checked:0,tempAddress:null}},computed:{currentAddress:function(){return 0===this.list.length?{}:this.list[this.checked]}},created:function(){r=uni.createMapContext("map")},onNavigationBarButtonTap:function(){this.submit()},onLoad:function(t){var e=this;return(0,s.default)(regeneratorRuntime.mark((function i(){var a,s,n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.data,!a){i.next=8;break}e.tempAddress=JSON.parse(a),e.room=e.tempAddress.room,s=e.tempAddress.location.lng,n=e.tempAddress.location.lat,i.next=13;break;case 8:return i.next=10,e.getLocation();case 10:o=i.sent,s=+o.longitude,n=+o.latitude;case 13:e.map={longitude:s,latitude:n},e.position={longitude:s,latitude:n},e.getAddressList(1);case 16:case"end":return i.stop()}}),i)})))()},methods:{submit:function(){var t=this.currentAddress,e=this.room,i=t.ad_info,a=t.address,s=t.location,n=t.title;this.$util.prePage().setAddress(Object.assign({},{ad_info:i,address:a,location:s,title:n,room:e})),uni.navigateBack()},getAddressList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;1!==this.isSetTempAddress&&c.reverseGeocoder({location:{latitude:this.position.latitude,longitude:this.position.longitude},get_poi:1,poi_options:"page_size=30;page_index=1",success:function(i){if(i.result.pois.forEach((function(t){t.ad_info||(t.ad_info={adcode:t.adcode,city:t.city,district:t.district,province:t.province})})),t.tempAddress&&(t.tempAddress.title!=i.result.pois[0].title&&(t.tempAddress.ad_info||(t.tempAddress.ad_info={adcode:t.tempAddress.adcode,city:t.tempAddress.city,district:t.tempAddress.district,province:t.tempAddress.province}),i.result.pois.unshift(t.tempAddress)),t.tempAddress=null,t.isSetTempAddress=1,setTimeout((function(){t.isSetTempAddress=0}),500)),e){var a=i.result.pois[0].ad_info;t.curCity=a.city||"",i.result.pois[0].select=1,t.list=i.result.pois,t.checked=0}else t.list=i.result.pois},fail:function(t){console.log(t)}})},onRegionchange:function(t){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){"end"!==t.type&&"regionchange"!==t.type||r.getCenterLocation({success:function(t){e.position={latitude:t.latitude,longitude:t.longitude},1==e.mapStatus&&e.getAddressList(1)},fail:function(t){console.log(t)}})}),200)},chooseAddress:function(t){var e=this,i=this.list;this.map={longitude:i[t].location.lng,latitude:i[t].location.lat},this.checked=t,this.mapStatus=0,clearTimeout(this.mapStatusTimer),this.mapStatusTimer=setTimeout((function(){e.mapStatus=1}),1e3)},getLocation:function(){return new Promise((function(t){t({longitude:116.39742,latitude:39.909})}))},navTo:function(t){uni.navigateTo({url:t})}}};e.default=d},"4ecd":function(t,e,i){"use strict";i.r(e);var a=i("2949"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"528b":function(t,e,i){"use strict";var a=i("fe50"),s=i.n(a);s.a},"88af":function(t,e,i){var a=i("c012");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("dd2dc676",a,!0,{sourceMap:!1,shadowMode:!1})},a58a:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-3cf19cee]{height:100%;background:#f6f6f6}body.?%PAGE?%[data-v-3cf19cee]{background:#f6f6f6}",""]),t.exports=e},b56f:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"app"},[i("v-uni-view",{staticClass:"current-address row b-b"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticClass:"row"},[i("v-uni-text",{staticClass:"red"},[t._v("[当前]")]),i("v-uni-text",{staticClass:"title"},[t._v(t._s(t.currentAddress.title))])],1),i("v-uni-text",{staticClass:"addr clamp"},[t._v(t._s(t.currentAddress.address))])],1),i("v-uni-image",{staticClass:"ser-icon",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAENElEQVRoQ+2a/1XcMAzHlQkKExQmaJmAMgHtBJQJqkzQMsGpExQm6HWCHhMUJihMUJjAfd97znuucc6Sklxf4PwXjzixPtYPS/I19MJG88J4aQf83DW+0/BOw89sByY3aWbea5rmDREdhBAO0v1rmmYVQrgXkbtt7eskwMz8lojOiOgdEeHv2nggolXTNMvFYnFVmzzk+ajAbduehhA4gnrlArwQ0VcRwd+jjlGAo0YXA0FzsDW4iFyMSTwYmJk/E9GXDULdEtGSiOCnqa/uRXOHX78nolc937ghog9j+bkbGMGIiKDVjwVB7+MmLLVmGa0E7gDfL2n7REQAP2i4gCPsz0JAWoOKyKVXKmaGxmExJfDzId+GTF5gwCICp+MHtK3VaG1DmBlmjo1LTR1+PUjTZmBmRgT9lAl8ISKb/LjGV3wezRz+/zqZAOhD78aagOOuf8+kaxFKXUSKl6L7INilml6JyIni9SdT1MBx4V/ImJKvXIlIKWh5ZOl9J2p6lUG7/NkCDJPFEdSNWxHRZFGjwDMzIjhOhW64TFsFHLX7m4hwFHUDwQO7vrXBzFjvOFnQrGUtMMz2W7LQtYjkUXpycGbGmjghunEnIoeWhbXAiJSnyYePxkgCLIJ2c5kZyQeqr26YZKkCR3P+kyyAcu6fMs8juPedgi+bjkQNcG5GW4nMfRsSMzHEk26Y3EsDnEdnJPIw8f82MrN+EJF9rTAaYKR3aV679eicw+TRWkSqHN03qhMLR8G+N63TaqE2j5ndSjADW3azJrj3OTPnbqa2urkC5wUMiglVI1ADnJ/B6t30arD23tQ+7DafmuDe51MD52nlpOVgbRMKidDo5zCyqvSgvxGRo5pgUz0v1ORo56KSUo2qD+MrzIyAkHYd1EFCJYVh0pAjCctogXM/NuWvBp6NU2NaiSZEV6Y+ikhaslaX0gLnZo3iG1WK6iioSqGcUNCuOa9XAUezzrMb82JKruK0QtHwiHaTNeuzAOdahmDmjoMHuqcP7nIrNXDUcu7L+LepAHcCo1OKPnU3XNpVB61UyELHYXBzfNMmMDNaS3ln1L3JJg1HLcO00WbJbwSQkLivWHLoDdc5gxIfM3CERns27xPjEYAh0KB73bZtz0IIKBDyI8fctMs30gVcgXZfaMeuJHrfmzqilyJy7okFLh/O/BnmjWoq7SKmU5bxdxzId59cdcbffxyHEBCQAKltDrqh3RrOwEvRu08JAAeYJkO6jgGrdH3qgh4FOAlmffe6Vgt8cs9cyLLWMcNq3qMBd0QxI0L1AjNNCw4NNO6YcRlZvMIZA3p04IKPd75ZCkTd7z5w/am6pxoKPSmwRqWeOUOgZwkcY0ZezODf1WbAbIH7oGtt5FkDF6Cr/a3ZA0fodWDU5PLPAtgS+HbAlt2a49ydhueoNYvMOw1bdmuOc/8C4xLETHORTG0AAAAASUVORK5CYII="},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("search?city="+t.curCity)}}})],1),i("v-uni-view",{staticClass:"confirm-wrap row"},[i("v-uni-input",{staticClass:"input",attrs:{placeholder:"补充详细地址：楼号、门牌等(选填)","placeholder-class":"placeholder"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}},model:{value:t.room,callback:function(e){t.room=e},expression:"room"}}),i("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("确定")])],1),i("v-uni-map",{staticClass:"map",attrs:{id:"map",scale:15,"show-location":!0,longitude:t.map.longitude,latitude:t.map.latitude},on:{regionchange:function(e){arguments[0]=e=t.$handleEvent(e),t.onRegionchange.apply(void 0,arguments)}}},[i("v-uni-cover-image",{staticClass:"map-center-icon",attrs:{src:"https://7478-tx-cloud-mix-mall-d6944c-1302673523.tcb.qcloud.la/5bfbd58b18200d8e16f6b17a02e6ed9.png"}})],1),i("v-uni-scroll-view",{staticClass:"addr-list-scroll",attrs:{"scroll-y":!0}},[i("v-uni-view",{staticClass:"addr-list"},t._l(t.list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"addr-item b-b row",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseAddress(a)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"title"},[t._v(t._s(e.title))]),i("v-uni-text",{staticClass:"addr"},[t._v(t._s(e.address))])],1),t.checked===a?i("v-uni-icon",{staticClass:"icon_circle",attrs:{type:"success",color:"#ff536f",size:"18"}}):t._e()],1)})),1)],1)],1)},n=[]},b9b6:function(t,e,i){"use strict";var a=i("88af"),s=i.n(a);s.a},bc15:function(t,e,i){"use strict";i.r(e);var a=i("b56f"),s=i("4ecd");for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("528b"),i("b9b6");var o,c=i("f0c5"),r=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,"3cf19cee",null,!1,a["a"],o);e["default"]=r.exports},c012:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 配色 */.app[data-v-3cf19cee]{display:flex;flex-direction:column;height:100%;overflow:hidden}.row[data-v-3cf19cee]{display:flex;align-items:center}.b-b[data-v-3cf19cee]{position:relative}.b-b[data-v-3cf19cee]:after{position:absolute;z-index:3;left:0;top:auto;bottom:0;right:0;height:0;content:"";-webkit-transform:scaleY(.5);transform:scaleY(.5);border-bottom:1px solid #e5e5e5}.clamp[data-v-3cf19cee]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}.current-address[data-v-3cf19cee]{height:%?120?%;padding:0 %?24?%;background-color:#fff}.current-address .left[data-v-3cf19cee]{width:%?634?%}.current-address .red[data-v-3cf19cee]{flex-shrink:0;margin-right:%?6?%;font-size:%?28?%;color:#ff536f;line-height:%?36?%}.current-address .title[data-v-3cf19cee]{font-size:%?28?%;color:#333;font-weight:700;line-height:%?36?%}.current-address .addr[data-v-3cf19cee]{width:%?700?%;margin-top:%?12?%;font-size:%?24?%;color:#909399;line-height:1.4}.current-address .ser-icon[data-v-3cf19cee]{flex-shrink:0;width:%?66?%;height:%?66?%;padding:%?12?% %?4?% %?12?% %?20?%}.confirm-wrap[data-v-3cf19cee]{height:%?88?%;padding:0 %?24?%;background-color:#fff}.confirm-wrap .input[data-v-3cf19cee]{flex:1;font-size:%?28?%;color:#303133}.confirm-wrap .btn[data-v-3cf19cee]{padding:0 %?24?%;font-size:%?26?%;color:#fff;line-height:%?50?%;background-color:#ff536f;border-radius:%?100?%}.map[data-v-3cf19cee]{width:%?750?%;height:%?700?%}.map .map-center-icon[data-v-3cf19cee]{position:absolute;left:%?339?%;top:%?264?%;width:%?72?%;height:%?72?%}.addr-list-scroll[data-v-3cf19cee]{flex:1;overflow:hidden}.addr-list-scroll .addr-list[data-v-3cf19cee]{background-color:#fff}.addr-list-scroll .addr-item[data-v-3cf19cee]{padding:%?24?%}.addr-list-scroll .left[data-v-3cf19cee]{flex:1;display:flex;flex-direction:column;padding-right:%?50?%}.addr-list-scroll .title[data-v-3cf19cee]{font-size:%?28?%;color:#303133}.addr-list-scroll .addr[data-v-3cf19cee]{margin-top:%?10?%;font-size:%?24?%;color:#909399;line-height:1.4}',""]),t.exports=e},fe50:function(t,e,i){var a=i("a58a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("2d4dfbc0",a,!0,{sourceMap:!1,shadowMode:!1})}}]);