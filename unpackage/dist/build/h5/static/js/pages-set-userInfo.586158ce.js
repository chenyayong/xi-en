(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-set-userInfo"],{"0356":function(t,e,n){"use strict";(function(t){var a=n("4ea4");n("fb6a"),n("d3b7"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),r=n("ef17"),o={data:function(){return{uploadProgress:100,tempAvatar:"",userInfo:{}}},computed:{curUserInfo:function(){return this.$store.state.userInfo}},watch:{curUserInfo:function(t){var e=t.head_pic,n=t.nickname,a=t.sex,i=t.anonymous;this.userInfo={head_pic:e,nickname:n,sex:a,anonymous:!!i}}},onLoad:function(){var t=this.curUserInfo,e=t.head_pic,n=t.nickname,a=t.sex,i=t.anonymous;this.userInfo={head_pic:e,nickname:n,sex:a,anonymous:!!i}},methods:{confirm:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n,a,i,o,s,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.uploadProgress,a=t.userInfo,i=t.curUserInfo,o=!1,e.t0=regeneratorRuntime.keys(a);case 3:if((e.t1=e.t0()).done){e.next=10;break}if(s=e.t1.value,a[s]===i[s]){e.next=8;break}return o=!0,e.abrupt("break",10);case 8:e.next=3;break;case 10:if(!1!==o){e.next=14;break}return t.$util.msg("信息未修改"),t.$refs.confirmBtn.stop(),e.abrupt("return");case 14:if(100===n){e.next=18;break}return t.$util.msg("请等待头像上传完毕"),t.$refs.confirmBtn.stop(),e.abrupt("return");case 18:if(a.nickname){e.next=22;break}return t.$util.msg("请输入您的昵称"),t.$refs.confirmBtn.stop(),e.abrupt("return");case 22:return c={nickname:a.nickname,head_pic:a.head_pic,sex:a.sex},e.next=25,(0,r.updateUserInfo)(c);case 25:u=e.sent,t.$refs.confirmBtn.stop(),t.$util.msg(u.msg),1===u.status&&(t.$store.dispatch("getUserInfo"),setTimeout((function(){}),1e3));case 29:case"end":return e.stop()}}),e)})))()},chooseImage:function(){var t=this;uni.chooseImage({count:1,success:function(e){t.tempAvatar=e.tempFilePaths[0],t.uploadProgress=0,uni.uploadFile({url:"/api/user/head_pic",filePath:e.tempFilePaths[0],name:"head_pic",success:function(e){var n=JSON.parse(e.data);1===n.status?t.userInfo.head_pic=n.result:(t.$util.msg(n.msg),t.tempAvatar=t.userInfo.head_pic),t.uploadProgress=100},fail:function(e){t.$util.msg("上传失败"),t.uploadProgress=100}})}})},setAvatar:function(e){var n=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.tempAvatar=e,n.uploadProgress=0,a.next=4,(0,r.uploadHeadPic)({head_pic:n.tempAvatar});case 4:return a.sent,a.next=7,t.uploadFile({filePath:e,cloudPath:+new Date+("000000"+Math.floor(999999*Math.random())).slice(-6)+".jpg",onUploadProgress:function(t){n.uploadProgress=Math.round(100*t.loaded/t.total)}});case 7:if(i=a.sent,i.fileID){a.next=11;break}return n.$util.msg("头像上传失败"),a.abrupt("return");case 11:if("undefined"!==typeof t.getTempFileURL){a.next=15;break}n.userInfo.avatar=i.fileID,a.next=20;break;case 15:return a.next=17,t.getTempFileURL({fileList:[i.fileID]});case 17:o=a.sent,s=o.fileList[0],s.download_url||s.fileID?n.userInfo.avatar=s.download_url||s.fileID:n.$util.msg("头像上传失败");case 20:case"end":return a.stop()}}),a)})))()},changeGender:function(t){this.$set(this.userInfo,"sex",t)},onSwitch:function(t){this.userInfo.anonymous=!t.detail.value}}};e.default=o}).call(this,n("a9ff")["default"])},"0975":function(t,e,n){"use strict";n.r(e);var a=n("b4b6"),i=n("c282");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("a32a");var o,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"fe6dc3d8",null,!1,a["a"],o);e["default"]=c.exports},"1f29":function(t,e,n){"use strict";n.r(e);var a=n("0356"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},3305:function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=null,i={name:"MixButton",data:function(){return{dead:!1,loading:!1}},props:{text:{type:String,default:"提交"},icon:{type:String,default:""},iconSize:{type:Number,default:32},isConfirm:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},marginTop:{type:String,default:"0rpx"}},methods:{stop:function(){a&&(clearTimeout(a),a=null),this.loading=!1},death:function(){this.loading=!1,this.dead=!0},confirm:function(){var t=this;this.dead||this.loading||this.disabled||(this.isConfirm&&(this.loading=!0,a=setTimeout((function(){t.loading=!1,clearTimeout(a),a=null}),1e4)),this.$emit("onConfirm"))}}};e.default=i},4407:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 配色 */.mix-btn-content[data-v-fe6dc3d8]{display:flex;align-items:center;justify-content:center;width:%?610?%;height:%?88?%;margin:0 auto;font-size:%?32?%;color:#fff;border-radius:%?100?%;background-color:#ff536f;position:relative}.mix-btn-content[data-v-fe6dc3d8]:after{content:"";position:absolute;left:50%;top:25%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:85%;height:85%;background:linear-gradient(131deg,#ff738a,#ff536f);border-radius:%?100?%;opacity:.4;-webkit-filter:blur(%?10?%);filter:blur(%?10?%)}.mix-btn-content.disabled[data-v-fe6dc3d8]{opacity:.65}.mix-btn-content .mix-text[data-v-fe6dc3d8]{position:relative;z-index:1}.mix-btn-content .mix-icon[data-v-fe6dc3d8]{position:relative;z-index:1;margin-right:%?8?%}.mix-btn-content .loading-icon[data-v-fe6dc3d8]{width:%?34?%;height:%?34?%;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;margin-right:%?16?%;-webkit-animation:rotate-data-v-fe6dc3d8 2s linear infinite;animation:rotate-data-v-fe6dc3d8 2s linear infinite;position:relative;z-index:1}@-webkit-keyframes rotate-data-v-fe6dc3d8{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate-data-v-fe6dc3d8{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}',""]),t.exports=e},"582e":function(t,e,n){"use strict";n.r(e);var a=n("9735"),i=n("1f29");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("b5c8");var o,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"48882076",null,!1,a["a"],o);e["default"]=c.exports},9735:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={mixButton:n("0975").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"app"},[n("v-uni-view",{staticClass:"cell"},[n("v-uni-text",{staticClass:"tit fill"},[t._v("头像")]),n("v-uni-view",{staticClass:"avatar-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"avatar",attrs:{src:t.tempAvatar||t.userInfo.head_pic||"/static/icon/default-avatar.png",mode:"aspectFill"}}),n("v-uni-view",{staticClass:"progress center",class:{"no-transtion":0===t.uploadProgress,show:100!=t.uploadProgress},style:{width:t.uploadProgress+"%",height:t.uploadProgress+"%"}})],1)],1),n("v-uni-view",{staticClass:"cell b-b"},[n("v-uni-text",{staticClass:"tit fill"},[t._v("昵称")]),n("v-uni-input",{staticClass:"input",attrs:{type:"text",maxlength:"20",placeholder:"请输入昵称","placeholder-class":"placeholder"},model:{value:t.userInfo.nickname,callback:function(e){t.$set(t.userInfo,"nickname",e)},expression:"userInfo.nickname"}})],1),n("v-uni-view",{staticClass:"cell b-b"},[n("v-uni-text",{staticClass:"tit fill"},[t._v("性别")]),n("v-uni-view",{staticClass:"checkbox center"},[0==t.userInfo.sex?n("v-uni-text",{staticClass:"mix-icon icon-xuanzhong"}):n("v-uni-text",{staticClass:"mix-icon icon-yk_yuanquan"}),n("v-uni-text",[t._v("未知")])],1),n("v-uni-view",{staticClass:"checkbox center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeGender(1)}}},[1==t.userInfo.sex?n("v-uni-text",{staticClass:"mix-icon icon-xuanzhong"}):n("v-uni-text",{staticClass:"mix-icon icon-yk_yuanquan"}),n("v-uni-text",[t._v("男")])],1),n("v-uni-view",{staticClass:"checkbox center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeGender(2)}}},[2==t.userInfo.sex?n("v-uni-text",{staticClass:"mix-icon icon-xuanzhong"}):n("v-uni-text",{staticClass:"mix-icon icon-yk_yuanquan"}),n("v-uni-text",[t._v("女")])],1)],1),n("mix-button",{ref:"confirmBtn",attrs:{text:"保存资料",marginTop:"80rpx"},on:{onConfirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}})],1)},r=[]},98097:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 配色 */.app[data-v-48882076]{padding-top:%?16?%}.cell[data-v-48882076]{display:flex;align-items:center;min-height:%?110?%;padding:0 %?40?%}.cell[data-v-48882076]:first-child{margin-bottom:%?10?%}.cell[data-v-48882076]:after{left:%?40?%;right:%?40?%;border-color:#d8d8d8}.cell .tit[data-v-48882076]{font-size:%?30?%;color:#333}.cell .avatar-wrap[data-v-48882076]{width:%?120?%;height:%?120?%;position:relative;border-radius:%?100?%;overflow:hidden}.cell .avatar-wrap .avatar[data-v-48882076]{width:100%;height:100%;border-radius:%?100?%}.cell .avatar-wrap .progress[data-v-48882076]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?100?%;height:%?100?%;box-shadow:rgba(0,0,0,.6) 0 0 0 2005px;border-radius:%?100?%;transition:.5s;opacity:0}.cell .avatar-wrap .progress.no-transtion[data-v-48882076]{transition:0s}.cell .avatar-wrap .progress.show[data-v-48882076]{opacity:1}.cell .input[data-v-48882076]{flex:1;text-align:right;font-size:%?28?%;color:#333}.cell uni-switch[data-v-48882076]{margin:0;-webkit-transform:scale(.8) translateX(%?10?%);transform:scale(.8) translateX(%?10?%);-webkit-transform-origin:center right;transform-origin:center right}.cell .tip[data-v-48882076]{margin-left:%?20?%;font-size:%?28?%;color:#999}.cell .checkbox[data-v-48882076]{padding:%?12?% 0 %?12?% %?40?%;font-size:%?28?%;color:#333}.cell .checkbox .mix-icon[data-v-48882076]{margin-right:%?12?%;font-size:%?36?%;color:#ccc}.cell .checkbox .icon-xuanzhong[data-v-48882076]{color:#ff536f}',""]),t.exports=e},a32a:function(t,e,n){"use strict";var a=n("f7d2"),i=n.n(a);i.a},b4b6:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"mix-btn-content",class:{disabled:t.loading||t.disabled||t.dead},style:[{marginTop:t.marginTop}],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t.loading?n("v-uni-image",{staticClass:"loading-icon",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAE3UlEQVRoQ82Z7ZEQNwyGrQoCFQQqgFRAqCBcBSEVQCqAqyBJBTkqACoAKsilAo4KQioQ8+zIO16tvbaWM4P/7lrSq2/JkiYeVX2SUnpmLP4SkTez2MkswgbitaN/MQvMTCBo/xcH5IOI/DxDeWEgqvq0cJfLloZV9X1K6VEEiKo+NNpvo5YLAYm4SxSIqt5JKf2TUrqXUvosIncjlosCqbnLTUrpJxH5XDI+AeRlSumF0Qi7YBTIn4VblXLjYgiynggQVcUKWAOrcB6LCK45fKJAYPixQh1rYBWss5wgELIbqZrzSkSIw9AJATEBW1Z5IyIXUSCqShZ7Z/f+Tyk9LBUyiuYMEMyP5n+oMFldYtQiqopLka04OxedBsSsgun/rjC5EZH7o65lqTzT+WTW2CSN00CKtgKCtBXVoGtoHL6/iciVql6llH51glAflliwdEu85QBf7vUEt8SQvPttXMv5a6YJcUy+BrIJUvp2yX9JnQ1apeuVsdZNtwacvi1nx02744GUubwUDuvAGAutpm9ofRXKwOQMdJWta0L9VzAg4123rKGqWBbZyJr5/C4iyLQcD+R5SumPA/NilZci8qpwDx/43cbQ3COncZQD390xRVAkfX8G/+elUj0Q/JWYeNDxVf5BI9cmFFpHW6vWB3ydTEWq3cWFWQyF+nrywRS5i9tq+rVsgtlqKbaUsav9HiD/XVWxABbKSYBfqC9YoJkMmnXEtIJf5sGoJlM3SEeBWOdLhS/jgOuXxKfv5TzdbkE010ETviWH1m0C8YnmrVlhky1biukCyRct8AD0Y0Hs1lzL6hf0yYpPpzaNlqlyYL+PMht1szP/DVvkDPFveWcBYnHg24mWHPRTSx35no5YtqADjZxmEYsQqf1rsYJSy/R7RJaO4BIgrbbkUCYRmeKWqkrrMgoiy7gA6bUlNUCfRMTn+681xnJfVdFwr7PwvC4AAnqWCrU6UROOKvtkZsayVD+qGGL2ZnUPA5QntRYR1jTNLnWU84z/pvj5DEF7NMNArKmjraZ1oAM+NZp6wcwjyFb/nnHbYSCWFmmtyyBfR9eexnrf3ZBGzKKkoT4L2l0gB8MN92c2jdCnNGym0pZCjtp4NM9scLQsO72+aRRDBKcclHMQrssscthN7IAUQ74fbkrerG4gfusPN8afoc63TEyFKK661amNumz9WmmYGsKQ4/e8xA7AYUJr300AqsodVkMIVxt3SSjw8fWtutWJLB92A79VYt/ibLYb1suxh1rrj1sV7fbGpelt7IZHOQdxh9XSSnMECAM/brQrhJUlGzKsQFz7s8aT3Su3L4eLa/sfi+dnhw2fXdZy7Uo3Dip7LVzvXnYtt43cZLhKs9p9SrBxI7t1ex3Uy/XO5MSRb/83a88OEHo8rJxdhonzcUSG8t9uHWkRVlWSQrk429WUIyAWX34ZPrT/rcl0CkjjLXHnGj0gBqZ8NK0+441Y6SwQ1p1lq1IN1kEgfhl+qsiGgVSCtPnKNALErFI+QRym43CL0mghCNDyTYPfmhoMAMG6BH5uTcLviCGLVBYVh69Mo0BqhTW6EwgBMYb5rb078gaBlC8B4a46DMTAEKDXvZ4qAiS7Mu3L1MFqJAVWpr4ytYa1HOF5yiKjDFq91uj9yH9TgZgbLiPB7O3LF2dInShyDo35AAAAAElFTkSuQmCC"}}):t._e(),t.icon?n("v-uni-text",{staticClass:"mix-icon",class:t.icon,style:{fontSize:t.iconSize+"rpx"}}):t._e(),n("v-uni-text",{staticClass:"mix-text"},[t._v(t._s(t.text))])],1)},r=[]},b5c8:function(t,e,n){"use strict";var a=n("c39f"),i=n.n(a);i.a},c282:function(t,e,n){"use strict";n.r(e);var a=n("3305"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},c39f:function(t,e,n){var a=n("98097");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("67e3bfa6",a,!0,{sourceMap:!1,shadowMode:!1})},f7d2:function(t,e,n){var a=n("4407");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("65b75fcc",a,!0,{sourceMap:!1,shadowMode:!1})}}]);