(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-userCoupon"],{"113b":function(t,e,n){"use strict";n.r(e);var o=n("eaa9"),a=n("d88a");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("5225"),n("c0cd");var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"43175ee9",null,!1,o["a"],s);e["default"]=c.exports},"2df6":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"uni-page-body[data-v-43175ee9]{background-color:#f7f7f7}body.?%PAGE?%[data-v-43175ee9]{background-color:#f7f7f7}",""]),t.exports=e},3336:function(t,e,n){var o=n("2df6");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("4f06").default;a("4a555122",o,!0,{sourceMap:!1,shadowMode:!1})},"45ac":function(t,e,n){var o=n("5610");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("4f06").default;a("92568c18",o,!0,{sourceMap:!1,shadowMode:!1})},5225:function(t,e,n){"use strict";var o=n("3336"),a=n.n(o);a.a},5610:function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/* 配色 */.coupon-item[data-v-43175ee9]{display:flex;flex-direction:column;margin:%?20?% %?24?%;background:#fff}.coupon-item.disabled .title[data-v-43175ee9]{color:#999}.coupon-item.disabled .price[data-v-43175ee9]{color:#bbb}.coupon-item .con[data-v-43175ee9]{display:flex;align-items:center;position:relative;height:%?140?%;padding:0 %?30?%}.coupon-item .con[data-v-43175ee9]:after{position:absolute;left:0;bottom:0;content:"";width:100%;height:0;border-bottom:1px dashed #e5e5e5;-webkit-transform:scaleY(50%);transform:scaleY(50%)}.coupon-item .left[data-v-43175ee9]{display:flex;flex-direction:column;justify-content:center;flex:1;overflow:hidden;height:%?100?%}.coupon-item .title[data-v-43175ee9]{font-size:%?32?%;color:#333;margin-bottom:%?24?%}.coupon-item .time[data-v-43175ee9]{font-size:%?24?%;color:#999}.coupon-item .right[data-v-43175ee9]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-left:%?30?%;font-size:%?24?%;color:#666;height:%?100?%}.coupon-item .price[data-v-43175ee9]{margin-bottom:%?14?%;font-size:%?50?%;color:#ff536f;font-weight:700}.coupon-item .price[data-v-43175ee9]:before{content:"￥";font-size:%?34?%}.coupon-item .bot[data-v-43175ee9]{height:%?80?%;padding:0 %?20?% 0 %?30?%}.coupon-item .bot .tips[data-v-43175ee9]{flex:1;font-size:%?24?%;color:#999}.coupon-item .bot .btn[data-v-43175ee9]{min-width:%?140?%;height:%?54?%;padding:0 %?26?%;font-size:%?22?%;color:#999;background-color:#eee;border-radius:%?100?%}.coupon-item .bot .btn.active[data-v-43175ee9]{color:#fff;background-color:#ff536f}.coupon-item .circle[data-v-43175ee9]{position:absolute;left:%?-6?%;bottom:%?-10?%;z-index:10;width:%?20?%;height:%?20?%;background:#f3f3f3;border-radius:100px}.coupon-item .circle.r[data-v-43175ee9]{left:auto;right:%?-6?%}',""]),t.exports=e},"81d1":function(t,e,n){"use strict";var o=n("4ea4");n("99af"),n("4160"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=o(n("1da1")),i=o(n("0bad")),s=o(n("393e")),r={components:{MescrollBody:i.default},mixins:[s.default],data:function(){return{navCounts:[],navs:[{name:"全部"},{name:"已使用"},{name:"已过期"}],navCurrent:0,upOption:{page:{num:0,size:10},noMoreSize:4},list:[]}},onLoad:function(){},methods:{loadData:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var o,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.mescroll&&e.mescroll.removeEmpty(),o={state:e.navCurrent,offset:(t.num-1)*t.size,limit:t.size},n.next=4,e.$request("coupon","getUserCouponList",o);case 4:a=n.sent,i=a.data,1===t.num&&(e.list=[],e.loaded&&i.forEach((function(t){t.loaded=!0})),i.length>0&&uni.pageScrollTo({scrollTop:0,duration:0})),e.list=e.list.concat(i),e.mescroll.endSuccess(i.length);case 9:case"end":return n.stop()}}),n)})))()},refreshList:function(t){this.mescroll&&this.mescroll.resetUpScroll(!1),!1!==t&&(this.isLoading=!0),this.$store.dispatch("getOrderCount")},mescrollInit:function(t){var e=this;this.mescroll=t,setTimeout((function(){e.refreshList()}),10)},onNavBarChange:function(t){this.navCurrent!==t&&(this.navCurrent=t,this.refreshList())},toUseCoupon:function(){uni.switchTab({url:"/pages/tabbar/home"})}}};e.default=r},c0cd:function(t,e,n){"use strict";var o=n("45ac"),a=n.n(o);a.a},d88a:function(t,e,n){"use strict";n.r(e);var o=n("81d1"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},eaa9:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={mixNavBar:n("87bd").default,mixLoading:n("50c5").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"app"},[n("v-uni-view",{staticClass:"nav-wrap"},[n("mix-nav-bar",{attrs:{navs:t.navs,counts:t.navCounts,current:t.navCurrent},on:{onChange:function(e){arguments[0]=e=t.$handleEvent(e),t.onNavBarChange.apply(void 0,arguments)}}})],1),n("mescroll-body",{ref:"mescrollRef",attrs:{top:84,up:t.upOption},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}}},t._l(t.list,(function(e,o){return n("v-uni-view",{key:o,staticClass:"coupon-item",class:{disabled:1!==e.state}},[n("v-uni-view",{staticClass:"con"},[n("v-uni-view",{staticClass:"left"},[n("v-uni-text",{staticClass:"title clamp"},[t._v(t._s(e.title))]),n("v-uni-text",{staticClass:"time"},[t._v("有效期至 "+t._s(t._f("date")(e.end_time,"Y-m-d H:i")))])],1),n("v-uni-view",{staticClass:"right"},[n("v-uni-text",{staticClass:"price"},[t._v(t._s(e.coupon_money))]),n("v-uni-text",[t._v("满"+t._s(e.total_money)+"可用")])],1),n("v-uni-view",{staticClass:"circle l"}),n("v-uni-view",{staticClass:"circle r"})],1),n("v-uni-view",{staticClass:"bot row"},[n("v-uni-text",{staticClass:"tips"},[t._v("平台所有商品可用")]),1===e.state?n("v-uni-view",{staticClass:"btn center active",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toUseCoupon.apply(void 0,arguments)}}},[n("v-uni-text",[t._v("立即使用")])],1):n("v-uni-view",{staticClass:"btn center"},[n("v-uni-text",[t._v(t._s(e.state_text))])],1)],1)],1)})),1),t.isLoading?n("mix-loading",{attrs:{mask:!0}}):t._e()],1)},i=[]}}]);