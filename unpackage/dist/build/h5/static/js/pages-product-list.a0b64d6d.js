(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-product-list"],{1038:function(t,e,i){var a=i("e5a7");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("5cb0b07f",a,!0,{sourceMap:!1,shadowMode:!1})},1676:function(t,e,i){"use strict";var a=i("1038"),n=i.n(a);n.a},"1b0b":function(t,e,i){"use strict";i.r(e);var a=i("ab421"),n=i("4021");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("1676"),i("663c");var r,c=i("f0c5"),s=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"cd6d51e6",null,!1,a["a"],r);e["default"]=s.exports},"2b13":function(t,e,i){"use strict";var a=i("4ea4");i("99af"),i("4de4"),i("4160"),i("d3b7"),i("ac1f"),i("3ca3"),i("159b"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("1da1")),o=a(i("8713")),r=a(i("0bad")),c=a(i("393e")),s=a(i("c99e")),d=i("6578"),u={components:{pageHeader:o.default,MescrollBody:r.default,productList:s.default},mixins:[c.default],data:function(){return{sourcePage:"",listType:"column",sortList:[{name:"综合排序",type:1,current:!0},{name:"销量",type:2,current:!1},{name:"价格",type:3,isPrice:!0,current:!1},{name:"好评率",type:5,current:!1}],isHot:0,keyword:"",cateList:[],curCateItem:{},list:[],upOption:{auto:!1,page:{num:0,size:10},noMoreSize:4}}},computed:{statusBarHeight:function(){return this.systemInfo.statusBarHeight},navigationBarHeight:function(){return this.systemInfo.navigationBarHeight},headerHeight:function(){return 750/uni.upx2px(750)*(this.navigationBarHeight+this.statusBarHeight)+96}},onLoad:function(t){this.isLoading=!0,this.sourcePage=t.sourcePage||"",this.keyword=t.keyword||"",this.prePage=t.prePage,t.firstCateId&&(this.curCateItem={id:t.cateId||"",parent_id:t.firstCateId},this.loadCateList()),this.isHot=t.isHot||0},onReady:function(){this.calcCateRect()},methods:{loadList:function(t){var e=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var a,n,o,r,c,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.mescroll.removeEmpty(),a=e.sortList,n=e.curCateItem,o=e.keyword,r={sort_type:a.filter((function(t){return t.current}))[0].type,cat_id:n.id,keyword:o,page:t.num,limit:t.size},e.$refs.productList.loadType=1===t.num?"refresh":"add",i.next=6,(0,d.getGoodsList)(r);case 6:c=i.sent,s=c.result.goods_list,1===t.num&&(e.list=[],e.loaded&&s.forEach((function(t){t.loaded=!0})),s.length>0&&uni.pageScrollTo({scrollTop:0,duration:200})),e.list=e.list.concat(s),e.mescroll.endSuccess(s.length),e.isLoading=!1;case 12:case"end":return i.stop()}}),i)})))()},loadCateList:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t.getOpenerEventChannel(),i.once&&(i.once("currentCate",(function(e){t.cateList=e.child_cate})),t.$nextTick((function(){t.calcCateRect()})));case 2:case"end":return e.stop()}}),e)})))()},mescrollInit:function(t){var e=this;this.mescroll=t,setTimeout((function(){e.refreshList()}),10)},refreshList:function(){this.mescroll.resetUpScroll(!1),this.isLoading=!0},calcCateRect:function(){var t=this,e=[];this.cateList.forEach(function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.push(new Promise((function(t){uni.createSelectorQuery().select("#cate-".concat(i.id)).boundingClientRect((function(e){i.left=e.left-(uni.upx2px(375)-e.width/2),t()})).exec()})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Promise.all(e).then((function(){var e=t.cateList.filter((function(e){return e.id===t.curCateItem.id}));e.length>0&&(t.curCateItem=e[0])}))},changeCategory:function(t){console.log("changeCategory",t),this.curCateItem.id!==t.id&&(this.curCateItem=t,this.refreshList())},changeSort:function(t){if(t.current){if(!t.isPrice)return;t.type=3===t.type?4:3}else this.sortList.forEach((function(t){return t.current=!1})),t.current=!0,3!==t.type&&4!==t.type||(t.type=3);this.refreshList()},delKeyword:function(){this.keyword="",this.refreshList()},changeListType:function(){this.listType="column"===this.listType?"row":"column"}}};e.default=u},3759:function(t,e,i){var a=i("59da");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("b3cf222a",a,!0,{sourceMap:!1,shadowMode:!1})},4021:function(t,e,i){"use strict";i.r(e);var a=i("2b13"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"59da":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 配色 */.content[data-v-2e21e48e]{position:fixed;left:0;top:0;z-index:95;width:100%;background-color:#fff}.btn[data-v-2e21e48e]{width:44px;height:40px;padding:5px 12px;position:relative}.btn[data-v-2e21e48e]:first-child{width:40px}.btn .mix-icon[data-v-2e21e48e]{font-size:20px;color:#333}.btn .icon-hengxiangliebiao[data-v-2e21e48e],\n.btn .icon-shuxiangliebiao[data-v-2e21e48e]{font-size:23px;color:#333}.search-wrap[data-v-2e21e48e]{flex:1;font-size:14px;color:#999;border-radius:100px;background-color:#f3f3f3}.search-wrap.has-keyword[data-v-2e21e48e]{justify-content:flex-start;padding-left:%?20?%}.search-wrap.has-keyword .icon-sousuo[data-v-2e21e48e]{font-size:22px;color:#777}.search-wrap .icon-sousuo[data-v-2e21e48e]{margin-right:6px;font-size:18px;color:#999}.search-wrap .keyword[data-v-2e21e48e]{padding:6px 9px 6px 10px;font-size:12px;color:#fff;background-color:#888;border-radius:100px}.search-wrap .keyword .icon-guanbi[data-v-2e21e48e]{margin-left:5px;font-size:8px}',""]),t.exports=e},"5e64":function(t,e,i){var a=i("c6a3");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("678cdc4e",a,!0,{sourceMap:!1,shadowMode:!1})},6578:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.collectGoods=e.getGoodsInfo=e.getGoodsList=e.getCategory=void 0;var a=i("e878"),n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request)("/api/goods/categoryList","get",t)};e.getCategory=n;var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request)("/api/goods/goodsList","get",t)};e.getGoodsList=o;var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request)("/api/goods/goodsInfo","get",t)};e.getGoodsInfo=r;var c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request)("/api/goods/collect_goods","get",t)};e.collectGoods=c},"663c":function(t,e,i){"use strict";var a=i("5e64"),n=i.n(a);n.a},7607:function(t,e,i){"use strict";var a=i("3759"),n=i.n(a);n.a},"7a55":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"mix-page-header"},[i("v-uni-view",{staticClass:"content row",style:{paddingRight:t.headerPaddingRight+"px",paddingTop:t.statusBarHeight+"px",height:t.navigationBarHeight+t.statusBarHeight+"px"}},[i("v-uni-view",{staticClass:"btn center"},[i("v-uni-text",{staticClass:"mix-icon icon-xiangzuo",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navBack.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"search-wrap center",class:{"has-keyword":t.keyword},style:{height:t.customHeight+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navToSearch.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"mix-icon icon-sousuo"}),t.keyword?i("v-uni-view",{staticClass:"keyword center",on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.delKeyword.apply(void 0,arguments)}}},[i("v-uni-text",[t._v(t._s(t.keyword))]),i("v-uni-text",{staticClass:"mix-icon icon-guanbi"})],1):i("v-uni-text",[t._v("输入关键字搜索")])],1),i("v-uni-view",{staticClass:"btn center"},[i("v-uni-text",{staticClass:"mix-icon",class:"column"===t.listType?"icon-hengxiangliebiao":"icon-shuxiangliebiao",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeListType.apply(void 0,arguments)}}})],1)],1)],1)},o=[]},8713:function(t,e,i){"use strict";i.r(e);var a=i("7a55"),n=i("94b9");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("7607");var r,c=i("f0c5"),s=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"2e21e48e",null,!1,a["a"],r);e["default"]=s.exports},"94b9":function(t,e,i){"use strict";i.r(e);var a=i("d506"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},ab421:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={mixLoading:i("50c5").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"app"},[i("page-header",{attrs:{keyword:t.keyword,listType:t.listType,sourcePage:t.sourcePage},on:{delKeyword:function(e){arguments[0]=e=t.$handleEvent(e),t.delKeyword.apply(void 0,arguments)},changeListType:function(e){arguments[0]=e=t.$handleEvent(e),t.changeListType.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"top",style:{top:t.navigationBarHeight+t.statusBarHeight+"px"}},[i("v-uni-view",{staticClass:"sort-bar row"},t._l(t.sortList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"item row center",class:{active:e.current,last:a===t.sortList.length-1},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeSort(e)}}},[i("v-uni-text",[t._v(t._s(e.name))]),e.isPrice?i("v-uni-view",{staticClass:"icon-wrap"},[i("v-uni-text",{staticClass:"mix-icon icon-down",class:{active:3===e.type}}),i("v-uni-text",{staticClass:"mix-icon icon-arrow-top",class:{active:4===e.type}})],1):t._e()],1)})),1),t.curCateItem.parent_id?i("v-uni-scroll-view",{staticClass:"cate-bar b-b",attrs:{"scroll-x":!0,"scroll-left":t.curCateItem.left?t.curCateItem.left:0,"scroll-with-animation":!0}},[i("v-uni-view",{staticClass:"cate-wrap row"},[i("v-uni-view",{staticClass:"fill-view"}),t._l(t.cateList,(function(e){return i("v-uni-text",{key:e.id,staticClass:"item",class:{active:e.id==t.curCateItem.id},attrs:{id:"cate-"+e.id},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeCategory(e)}}},[t._v(t._s(e.name))])})),i("v-uni-view",{staticClass:"fill-view"})],2)],1):t._e()],1),t.curCateItem.parent_id?i("v-uni-view",{staticStyle:{"min-height":"94rpx"}}):t._e(),i("mescroll-body",{ref:"mescrollRef",attrs:{top:t.headerHeight,up:t.upOption},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.loadList.apply(void 0,arguments)}}},[i("product-list",{ref:"productList",attrs:{list:t.list,listType:t.listType}})],1),t.isLoading?i("mix-loading"):t._e()],1)},o=[]},c6a3:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 配色 */.app.overhidden[data-v-cd6d51e6]{height:100vh;overflow:hidden}[data-v-cd6d51e6] .mix-empty .default{padding-top:38vh;padding-top:34vh}.top[data-v-cd6d51e6]{position:fixed;left:0;width:100%;z-index:95;background-color:#fff}.sort-bar[data-v-cd6d51e6]{justify-content:space-around;height:%?76?%;padding:%?4?% 0 %?4?% %?4?%;background-color:#fff;position:relative;z-index:1}.sort-bar .item[data-v-cd6d51e6]{flex:1;height:100%;font-size:%?28?%;color:#333;position:relative;overflow:hidden}.sort-bar .item.active[data-v-cd6d51e6]{color:#ff536f;font-weight:700}.sort-bar .item.active[data-v-cd6d51e6]:after{position:absolute;left:50%;bottom:0;-webkit-transform:translateX(%?-28?%);transform:translateX(%?-28?%);content:"";width:%?56?%;height:%?4?%;background-color:#ff536f;border-radius:10px}.sort-bar .item.active .mix-icon.active[data-v-cd6d51e6]{color:#ff536f}.sort-bar .icon-wrap[data-v-cd6d51e6]{display:flex;flex-direction:column;padding-left:%?8?%}.sort-bar .mix-icon[data-v-cd6d51e6]{font-size:%?14?%;color:#bbb}.sort-bar .btn[data-v-cd6d51e6]{height:%?68?%;padding-left:%?16?%;padding-right:%?20?%}.sort-bar .btn .icon-hengxiangliebiao[data-v-cd6d51e6],\n.sort-bar .btn .icon-shuxiangliebiao[data-v-cd6d51e6]{font-size:%?40?%;color:#333}.cate-bar[data-v-cd6d51e6]:after{border-color:#f5f5f5}.cate-wrap[data-v-cd6d51e6]{flex-wrap:nowrap;height:%?96?%;padding-bottom:%?4?%}.cate-wrap .fill-view[data-v-cd6d51e6]{flex-shrink:0;width:%?20?%;height:%?20?%}.cate-wrap .fill-view[data-v-cd6d51e6]:last-child{width:%?10?%}.cate-wrap .item[data-v-cd6d51e6]{flex-shrink:0;height:%?58?%;padding:0 %?28?%;margin-right:%?20?%;font-size:%?22?%;color:#333;text-align:center;line-height:%?58?%;background-color:#f5f5f5;border-radius:100px}.cate-wrap .active[data-v-cd6d51e6]{color:#ff536f;background-color:#fff8f4;font-weight:700}',""]),t.exports=e},d506:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"ProductListPageHeader",data:function(){return{}},props:{keyword:{type:String,default:""},listType:{type:String,default:"column"},sourcePage:String},computed:{statusBarHeight:function(){return this.systemInfo.statusBarHeight},navigationBarHeight:function(){return this.systemInfo.navigationBarHeight},customWidth:function(){return this.systemInfo.custom.width},customHeight:function(){return this.systemInfo.custom.height},headerPaddingRight:function(){return 0}},methods:{delKeyword:function(){this.$emit("delKeyword")},changeListType:function(){this.$emit("changeListType")},navBack:function(){uni.navigateBack()},navToSearch:function(){"search"===this.sourcePage?this.navBack():this.navTo("/pages/search/search?sourcePage=productList")}}};e.default=a},e5a7:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-cd6d51e6]{background-color:#f8f8f8}body.?%PAGE?%[data-v-cd6d51e6]{background-color:#f8f8f8}",""]),t.exports=e}}]);