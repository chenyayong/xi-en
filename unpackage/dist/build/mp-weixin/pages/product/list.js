(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/list"],{"1b0b":function(t,e,n){"use strict";n.r(e);var r=n("ba90"),i=n("4021");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("c1ef"),n("1bbb");var c,u=n("f0c5"),a=Object(u["a"])(i["default"],r["b"],r["c"],!1,null,"73b47bbe",null,!1,r["a"],c);e["default"]=a.exports},"1bbb":function(t,e,n){"use strict";var r=n("e79a"),i=n.n(r);i.a},"22f2":function(t,e,n){},4021:function(t,e,n){"use strict";n.r(e);var r=n("9eb3"),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=i.a},"9eb3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=c(n("a34a")),i=c(n("393e")),o=n("6578");function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,r,i,o,c){try{var u=t[o](c),a=u.value}catch(s){return void n(s)}u.done?e(a):Promise.resolve(a).then(r,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function c(t){u(o,r,i,c,a,"next",t)}function a(t){u(o,r,i,c,a,"throw",t)}c(void 0)}))}}var s=function(){n.e("pages/product/components/list-page-header").then(function(){return resolve(n("8713"))}.bind(null,n)).catch(n.oe)},l=function(){Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-body")]).then(function(){return resolve(n("0bad"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("pages/product/components/product-list").then(function(){return resolve(n("c99e"))}.bind(null,n)).catch(n.oe)},d={components:{pageHeader:s,MescrollBody:l,productList:f},mixins:[i.default],data:function(){return{sourcePage:"",listType:"column",sortList:[{name:"综合排序",type:1,current:!0},{name:"销量",type:2,current:!1},{name:"价格",type:3,isPrice:!0,current:!1},{name:"好评率",type:5,current:!1}],isHot:0,keyword:"",cateList:[],curCateItem:{},list:[],upOption:{auto:!1,page:{num:0,size:10},noMoreSize:4}}},computed:{statusBarHeight:function(){return this.systemInfo.statusBarHeight},navigationBarHeight:function(){return this.systemInfo.navigationBarHeight},headerHeight:function(){return 750/t.upx2px(750)*(this.navigationBarHeight+this.statusBarHeight)+96}},onLoad:function(t){this.isLoading=!0,this.sourcePage=t.sourcePage||"",this.keyword=t.keyword||"",this.prePage=t.prePage,t.firstCateId&&(this.curCateItem={id:t.cateId||"",parent_id:t.firstCateId},this.loadCateList()),this.isHot=t.isHot||0},onReady:function(){this.calcCateRect()},methods:{loadList:function(e){var n=this;return a(r.default.mark((function i(){var c,u,a,s,l,f;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.mescroll.removeEmpty(),c=n.sortList,u=n.curCateItem,a=n.keyword,s={sort_type:c.filter((function(t){return t.current}))[0].type,cat_id:u.id,keyword:a,page:e.num,limit:e.size},n.$refs.productList.loadType=1===e.num?"refresh":"add",r.next=6,(0,o.getGoodsList)(s);case 6:l=r.sent,f=l.result.goods_list,1===e.num&&(n.list=[],n.loaded&&f.forEach((function(t){t.loaded=!0})),f.length>0&&t.pageScrollTo({scrollTop:0,duration:200})),n.list=n.list.concat(f),n.mescroll.endSuccess(f.length),n.isLoading=!1;case 12:case"end":return r.stop()}}),i)})))()},loadCateList:function(){var t=this;return a(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.getOpenerEventChannel(),n.once&&(n.once("currentCate",(function(e){t.cateList=e.child_cate})),t.$nextTick((function(){t.calcCateRect()})));case 2:case"end":return e.stop()}}),e)})))()},mescrollInit:function(t){var e=this;this.mescroll=t,setTimeout((function(){e.refreshList()}),10)},refreshList:function(){this.mescroll.resetUpScroll(!1),this.isLoading=!0},calcCateRect:function(){var e=this,n=[];this.cateList.forEach(function(){var e=a(r.default.mark((function e(i){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.push(new Promise((function(e){t.createSelectorQuery().select("#cate-".concat(i.id)).boundingClientRect((function(n){i.left=n.left-(t.upx2px(375)-n.width/2),e()})).exec()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Promise.all(n).then((function(){var t=e.cateList.filter((function(t){return t.id===e.curCateItem.id}));t.length>0&&(e.curCateItem=t[0])}))},changeCategory:function(t){console.log("changeCategory",t),this.curCateItem.id!==t.id&&(this.curCateItem=t,this.refreshList())},changeSort:function(t){if(t.current){if(!t.isPrice)return;t.type=3===t.type?4:3}else this.sortList.forEach((function(t){return t.current=!1})),t.current=!0,3!==t.type&&4!==t.type||(t.type=3);this.refreshList()},delKeyword:function(){this.keyword="",this.refreshList()},changeListType:function(){this.listType="column"===this.listType?"row":"column"}}};e.default=d}).call(this,n("543d")["default"])},ba90:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}));var r={mixLoading:function(){return n.e("components/mix-loading/mix-loading").then(n.bind(null,"50c5"))}},i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},c1ef:function(t,e,n){"use strict";var r=n("22f2"),i=n.n(r);i.a},e79a:function(t,e,n){},f8d7:function(t,e,n){"use strict";(function(t){n("f37f");r(n("66fd"));var e=r(n("1b0b"));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])}},[["f8d7","common/runtime","common/vendor"]]]);