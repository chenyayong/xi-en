{"version":3,"sources":["uni-app:///main.js","webpack:////Users/chenyayong/Desktop/禧恩商城/pages/product/detail.vue?0f26","webpack:////Users/chenyayong/Desktop/禧恩商城/pages/product/detail.vue?a670","webpack:////Users/chenyayong/Desktop/禧恩商城/pages/product/detail.vue?1e80","webpack:////Users/chenyayong/Desktop/禧恩商城/pages/product/detail.vue?9d2a","uni-app:///pages/product/detail.vue","webpack:////Users/chenyayong/Desktop/禧恩商城/pages/product/detail.vue?b703","webpack:////Users/chenyayong/Desktop/禧恩商城/pages/product/detail.vue?3aca","webpack:////Users/chenyayong/Desktop/禧恩商城/pages/product/detail.vue?81c3","webpack:////Users/chenyayong/Desktop/禧恩商城/pages/product/detail.vue?32d2"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iG,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACa;AACyB;;;AAG3F;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,aAAa,0PAEN;AACP,KAAK;AACL;AACA,aAAa,0MAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAqzB,CAAgB,oyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwGz0B;AACA,yD;AACA,qB;AACA;AACA;AACA,wBADA;AAEA,0BAFA;AAGA,wBAHA;AAIA,0BAJA;AAKA,oCALA;AAMA,YANA,EADA;;AASA,MATA,kBASA;AACA;AACA,oBADA;AAEA;AACA,kBADA,EAFA;;AAKA,oBALA,CAKA;AALA;AAOA,GAjBA;AAkBA,QAlBA,kBAkBA,OAlBA,EAkBA;AACA;AACA,sBAFA,CAEA;AACA,GArBA;AAsBA,QAtBA,oBAsBA;AACA;AACA,GAxBA;AAyBA,cAzBA,wBAyBA,CAzBA,EAyBA;AACA;AACA,GA3BA;;AA6BA,mBA7BA,6BA6BA,GA7BA,EA6BA;AACA;AACA,4BADA;AAEA;AACA,sDAHA;AAIA,qDAJA;;AAMA,GApCA;;AAsCA;AACA,YADA,sBACA;AACA;AACA,gCADA,GADA,SACA,GADA;;;;;AAOA,gCAPA;AAQA;AACA;AACA;AACA,iBAFA,EAEA,IAFA,EATA;;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,kDADA;AAEA,8BAFA;;AAIA;AACA;AACA,qCADA,CACA;AACA,iBAFA;AAGA;AACA;AAxCA,4EAyCA,CA1CA;AA2CA;AACA,cA5CA,wBA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA,gRAQA,CApDA;AAqDA;AACA,aAtDA,uBAsDA;AACA;AACA,sCADA;;;AAIA,oBAJA;AAKA,2BALA;AAMA;AACA,gDADA;AAEA,4CAFA,EANA;;AAUA,8DAVA;AAWA,+BAXA;;AAaA;AACA;AACA,iBAfA;AAgBA,gDAhBA,SAgBA,GAhBA;AAiBA;AACA;AACA;AACA;AACA,qCADA;AAEA,mCAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;AAyCA,KAhGA;AAiGA;AACA,UAlGA,oBAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBADA;AAEA;AACA;AACA,qBADA;AAEA;AACA,0CADA;AAEA,sCAFA,EAFA;;AAMA,wDANA;;AAQA;AACA;AACA;AACA;AACA,SAfA;;AAiBA,KA1HA;AA2HA;AACA,iBA5HA,yBA4HA,IA5HA,EA4HA;AACA;AACA,KA9HA;AA+HA;AACA,kBAhIA,4BAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA;AACA;AAHA;AAKA;AACA,KArJA;AAsJA;AACA,cAvJA,wBAuJA;AACA;AACA;AACA,0BADA,CACA,SADA;AAEA,sCAFA,CAEA;AACA;AACA,qBAJA;AAKA,wBALA;AAMA,mBAPA,CADA,SACA,IADA;;AAUA,4BAVA,GAUA,yEAVA;AAWA,kBAXA,GAWA,oCAXA;AAYA,kBAZA,GAYA,wDAZA;AAaA;AACA;AACA,0CAfA;AAgBA,KAvKA;AAwKA;AACA,qBAzKA,+BAyKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBADA;AAEA,yBAFA;;AAIA;AACA,KAxLA;AAyLA;AACA,cA1LA,wBA0LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArMA;AAsMA,aAtMA,qBAsMA,GAtMA,EAsMA,IAtMA,EAsMA;AACA;AACA,KAxMA;AAyMA,mBAzMA,2BAyMA,IAzMA,EAyMA;AACA;AACA,KA3MA;AA4MA,cA5MA,wBA4MA;AACA;AACA,oBADA,GACA;AACA,oCADA;AAEA,yCAFA;AAGA,yBAHA;AAIA,6CAJA;AAKA,0CALA;AAMA;AACA,yCADA;AAEA,uEAFA;AAGA,2BAHA;AAIA,kDAJA,EANA;;AAYA;AACA;AACA,mBAdA;AAeA;AACA;AACA,mBAjBA,EADA;;AAoBA,gCApBA;;AAsBA,KAnOA,EAtCA,E;;;;;;;;;;;;;AC3GA;AAAA;AAAA;AAAA;AAA4pC,CAAgB,imCAAG,EAAC,C;;;;;;;;;;;ACAhrC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAA0/C,CAAgB,s5CAAG,EAAC,C;;;;;;;;;;;ACA9gD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/product/detail.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/product/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=0e9671aa&scoped=true&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./detail.vue?vue&type=style&index=1&id=0e9671aa&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e9671aa\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/product/detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=template&id=0e9671aa&scoped=true&\"","var components\ntry {\n  components = {\n    mixPriceView: function() {\n      return import(\n        /* webpackChunkName: \"components/mix-price-view/mix-price-view\" */ \"@/components/mix-price-view/mix-price-view.vue\"\n      )\n    },\n    jyfParser: function() {\n      return import(\n        /* webpackChunkName: \"components/jyf-parser/jyf-parser\" */ \"@/components/jyf-parser/jyf-parser.vue\"\n      )\n    },\n    mixLoading: function() {\n      return import(\n        /* webpackChunkName: \"components/mix-loading/mix-loading\" */ \"@/components/mix-loading/mix-loading.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"app\">\n\t\t<pageHeader ref=\"pageHeader\"></pageHeader>\n\t\t<!-- 轮播图 -->\n\t\t<mix-swiper :list=\"data.images\"></mix-swiper>\n\t\t<view class=\"introduce column\">\n\t\t\t<text class=\"title\">{{ data.title }}</text>\n\t\t\t<view class=\"price-wrap row\">\n\t\t\t\t<mix-price-view :price=\"data.price\" :size=\"40\"></mix-price-view>\n\t\t\t\t<!-- <text v-if=\"data.market_price > data.price\" class=\"m-price\">￥{{ data.market_price }}</text>-->\n\t\t\t\t<text class=\"m-price\">￥{{ data.market_price }}</text>\n\t\t\t\t<!-- <text v-if=\"loaded && !data.freight_template\" class=\"tag\">免邮费</text> -->\n\t\t\t</view>\n\t\t\t<view class=\"bot row\">\n\t\t\t\t<text class=\"fill\">销量: {{ data.sales || 0 }}</text>\n\t\t\t\t<text class=\"fill\">库存: {{ data.stock || 0 }}</text>\n\t\t\t\t<text class=\"fill\">浏览量: {{ data.look_num || 0 }}</text>\n\t\t\t</view>\n\t\t</view>\n\t\t<!--  分享 -->\n\t\t<view class=\"share-wrap row\">\n\t\t\t<view class=\"icon row\">\n\t\t\t\t<text class=\"mix-icon icon-iconfontxingxing\"></text>\n\t\t\t\t<text>分享</text>\n\t\t\t</view>\n\t\t\t<text class=\"tit\">发给好友看看吧~</text>\n\t\t\t<text class=\"mix-icon icon-bangzhu1\"></text>\n\n\t\t\t<!-- #ifdef MP-WEIXIN -->\n\t\t\t<button type=\"primary\" open-type=\"share\">\n\t\t\t\t<view class=\"btn\">\n\t\t\t\t\t立即分享\n\t\t\t\t\t<text class=\"mix-icon icon-you\"></text>\n\t\t\t\t</view>\n\t\t\t</button>\n\t\t\t<!-- #endif -->\n\t\t\t<!-- #ifndef MP-WEIXIN -->\n\t\t\t<view class=\"btn\" @click=\"doAppShare\">\n\t\t\t\t立即分享\n\t\t\t\t<text class=\"mix-icon icon-you\"></text>\n\t\t\t</view>\n\t\t\t<!-- #endif -->\n\t\t</view>\n\t\t<view class=\"c-list\">\n\t\t\t<view v-if=\"data.skuData\" class=\"row b-b\" @click=\"showPopup('skuPopup')\">\n\t\t\t\t<text class=\"tit\">购买类型</text>\n\t\t\t\t<view class=\"con\">\n\t\t\t\t\t<text class=\"attr\">{{ currentSku.name || '' }}</text>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"mix-icon icon-you\"></text>\n\t\t\t</view>\n\t\t\t<!-- <view class=\"row b-b\" @click=\"navTo('/pages/coupon/receiveCoupon', { login: true })\">\n\t\t\t\t<text class=\"tit\">优惠券</text>\n\t\t\t\t<text class=\"con red\">领取优惠券</text>\n\t\t\t\t<text class=\"mix-icon icon-you\"></text>\n\t\t\t</view> -->\n\t\t\t<!-- <view class=\"row b-b\">\n\t\t\t\t<text class=\"tit\">促销活动</text>\n\t\t\t\t<view class=\"con-list fill column\">\n\t\t\t\t\t<text>新人首单送20元无门槛代金券</text>\n\t\t\t\t\t<text>订单满50减10</text>\n\t\t\t\t\t<text>订单满100减30</text>\n\t\t\t\t\t<text>单笔购买满两件免邮费</text>\n\t\t\t\t</view>\n\t\t\t</view> -->\n\t\t\t<!-- <view class=\"row b-b\">\n\t\t\t\t<text class=\"tit\">服务</text>\n\t\t\t\t<view class=\"con\">\n\t\t\t\t\t<text class=\"service\">7天无理由退换货 ·</text>\n\t\t\t\t\t<text class=\"service\">假一赔十 ·</text>\n\t\t\t\t</view>\n\t\t\t</view> -->\n\t\t</view>\n\t\t<!-- 评价 -->\n\t\t<view id=\"rating\" class=\"rating-wrap column\" :class=\"{ 'no-data': !ratingData.data }\">\n\t\t\t<view class=\"e-header\" @click=\"navTo('/pages/rating/rating?id=' + data._id)\">\n\t\t\t\t<text class=\"tit\">商品评价</text>\n\t\t\t\t<text>({{ ratingData.count || 0 }})</text>\n\t\t\t\t<text class=\"tip\">好评率 {{ data.rating_ratio || 100 }}%</text>\n\t\t\t\t<text class=\"mix-icon icon-you\"></text>\n\t\t\t</view>\n\t\t\t<rating-item v-if=\"ratingData.data\" :item=\"ratingData.data\"></rating-item>\n\t\t</view>\n\t\t<view class=\"detail-desc\">\n\t\t\t<view class=\"d-header center\"><text>图文详情</text></view>\n\t\t\t<jyf-parser ref=\"article\" :html=\"data.content\" lazy-load show-with-animation></jyf-parser>\n\t\t\t<!-- <rich-text :nodes=\"data.content\"></rich-text> -->\n\t\t</view>\n\t\t<!-- 底部操作菜单 -->\n\t\t<bottom-operation :infoData=\"data\" @onOprationClick=\"onOprationClick\"></bottom-operation>\n\t\t<!-- 规格面板 -->\n\t\t<sku v-if=\"data.id\" ref=\"skuPopup\" :infoData=\"data\" @setSku=\"setCurrentSku\" @addToCart=\"addToCart\" @buyNow=\"buyNow\"></sku>\n\t\t<!-- loading -->\n\t\t<mix-loading v-if=\"isLoading\" :mask=\"true\"></mix-loading>\n\t</view>\n</template>\n\n<script>\nimport jyfParser from '@/components/jyf-parser/jyf-parser.vue';\nimport pageHeader from './components/detail-page-header'; //页面头\nimport mixSwiper from './components/mix-swiper'; //轮播图\nimport ratingItem from '@/pages/rating/components/rating-item'; //评价\nimport bottomOperation from './components/bottom-operation'; //底部栏\nimport sku from './components/sku'; //sku面板\nimport { getGoodsInfo } from '@/api/goods.js';\nimport { addCartOrders } from '@/api/cart.js';\nlet _anchorList = [];\nexport default {\n\tcomponents: {\n\t\tjyfParser,\n\t\tpageHeader,\n\t\tmixSwiper,\n\t\tratingItem,\n\t\tbottomOperation,\n\t\tsku\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrentSku: {},\n\t\t\tdata: {\n\t\t\t\timages: []\n\t\t\t},\n\t\t\tratingData: {} //评价\n\t\t};\n\t},\n\tonLoad(options) {\n\t\tthis.id = options.id;\n\t\tthis.loadRating(); //加载评价\n\t},\n\tonShow() {\n\t\tthis.loadData();\n\t},\n\tonPageScroll(e) {\n\t\tthis.$refs.pageHeader && this.$refs.pageHeader.pageScroll(e);\n\t},\n\t// #ifdef MP-WEIXIN\n\tonShareAppMessage(res) {\n\t\treturn {\n\t\t\ttitle: this.data.title,\n\t\t\t// path: '/pages/product/detail?id=' + this.data._id,\n\t\t\tpath: '/pages/product/detail?id=' + this.data.id,\n\t\t\timageUrl: this.$config.domain + this.data.thumb\n\t\t};\n\t},\n\t// #endif\n\tmethods: {\n\t\tasync loadData() {\n\t\t\tconst res = await getGoodsInfo({\n\t\t\t\tid: this.id\n\t\t\t});\n\t\t\t// const res = await this.$request('product', 'getDetail', {\n\t\t\t// \tid: this.id\n\t\t\t// })\n\t\t\tif (res.status === 0) {\n\t\t\t\tthis.$util.msg(res.msg || '产品不存在或已下架');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.navigateBack();\n\t\t\t\t}, 1000);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// const data = res.data;\n\t\t\t// data.content = data.content.replace(/img src=\"/g, 'img style=\"display:block;width:100%;height:auto\" src=\"');\n\t\t\t// this.data = data;\n\t\t\tthis.data.images = res.result.goods_images_list;\n\t\t\tthis.data.title = res.result.goods.goods_name;\n\t\t\tthis.data.market_price = res.result.goods.market_price;\n\t\t\tthis.data.price = res.result.goods.shop_price;\n\t\t\tthis.data.sales = res.result.goods.sales_sum;\n\t\t\tthis.data.stock = res.result.goods.store_count;\n\t\t\tthis.data.look_num = res.result.goods.click_count;\n\t\t\tthis.data.thumb = res.result.goods.original_img;\n\t\t\tthis.data.fav = res.result.collect || 0;\n\n\t\t\tthis.ratingData.count = res.result.goods.comment_count;\n\n\t\t\tthis.data.content = res.result.goods.goods_content;\n\t\t\tthis.data.id = this.id;\n\t\t\tthis.data.skuData = {\n\t\t\t\tspecList: res.result.filter_spec,\n\t\t\t\tattrList: []\n\t\t\t};\n\t\t\tthis.data.sku = res.result.spec_goods_price;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.calcAnchor(); //计算锚点参数\n\t\t\t});\n\t\t\t//添加浏览历史\n\t\t\t// this.addProductHistory();\n\t\t},\n\t\t//加载评价\n\t\tasync loadRating() {\n\t\t\t// const res = await this.$request('rating', 'getDetailRating', {\n\t\t\t// \tproduct_id: this.id\n\t\t\t// });\n\t\t\t// this.ratingData = res;\n\t\t\t// this.$nextTick(() => {\n\t\t\t// \tthis.calcAnchor(); //计算锚点参数\n\t\t\t// });\n\t\t},\n\t\t//加入购物车\n\t\taddToCart() {\n\t\t\tthis.$util.throttle(async () => {\n\t\t\t\tif (!this.$util.isLogin()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = {\n\t\t\t\t\t...this.data,\n\t\t\t\t\tsku: {\n\t\t\t\t\t\tname: this.currentSku.name,\n\t\t\t\t\t\tid: this.currentSku.id\n\t\t\t\t\t},\n\t\t\t\t\tnumber: this.$refs.skuPopup.buyNumber || 1,\n\t\t\t\t\tchecked: true\n\t\t\t\t};\n\t\t\t\tif (this.currentSku && this.currentSku.price) {\n\t\t\t\t\tdata.price = this.currentSku.price;\n\t\t\t\t}\n\t\t\t\tconst res = await addCartOrders(data);\n\t\t\t\tthis.$util.msg(res.msg);\n\t\t\t\tif (res.status === 1) {\n\t\t\t\t\tthis.hidePopup('skuPopup');\n\t\t\t\t\tthis.$store.commit('setStateAttr', {\n\t\t\t\t\t\tkey: 'cartOrders',\n\t\t\t\t\t\tval: res.result\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// const data = this.getConfirmData();\n\t\t\t\t// const res = await this.$request('cart', 'add', data, {\n\t\t\t\t// \tshowLoading: true,\n\t\t\t\t// \tlogin: true\n\t\t\t\t// });\n\t\t\t\t// if (!res) {\n\t\t\t\t// \treturn;\n\t\t\t\t// }\n\t\t\t\t// this.log(res);\n\t\t\t\t// this.$util.msg(res.msg);\n\t\t\t\t// if (res.status === 1) {\n\t\t\t\t// \tthis.hidePopup('skuPopup');\n\t\t\t\t// \tthis.$store.dispatch('getCartCount'); //更新购物车数量\n\t\t\t\t// \tuni.$emit('refreshCart'); //更新购物车\n\t\t\t\t// }\n\t\t\t});\n\t\t},\n\t\t//立即购买\n\t\tbuyNow() {\n\t\t\t// const data = this.getConfirmData();\n\t\t\t// if (!data) {\n\t\t\t// \treturn;\n\t\t\t// }\n\t\t\t// const url = '/pages/order/createOrder?data=' + JSON.stringify(data)\n\t\t\tthis.hidePopup('skuPopup');\n\t\t\tthis.navTo('/pages/order/createOrder', {\n\t\t\t\tlogin: true,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\t...this.data,\n\t\t\t\t\t\tsku: {\n\t\t\t\t\t\t\tname: this.currentSku.name,\n\t\t\t\t\t\t\tid: this.currentSku.id\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnumber: this.$refs.skuPopup.buyNumber || 1\n\t\t\t\t\t};\n\t\t\t\t\tif (this.currentSku && this.currentSku.price) {\n\t\t\t\t\t\tdata.price = this.currentSku.price;\n\t\t\t\t\t}\n\t\t\t\t\tres.eventChannel.emit('goodsData', [data]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//设置当前选择sku\n\t\tsetCurrentSku(data) {\n\t\t\tthis.currentSku = data;\n\t\t},\n\t\t//获取当前sku 如果没有sku返回默认规格\n\t\tgetConfirmData() {\n\t\t\t// const sku = this.currentSku._id ? this.currentSku : this.data.sku[0];\n\t\t\t// if (sku.stock <= 0 || this.data.stock <= 0) {\n\t\t\t// \tthis.$util.msg('库存不足');\n\t\t\t// \treturn false;\n\t\t\t// }\n\t\t\tif (this.data.stock <= 0) {\n\t\t\t\tthis.$util.msg('库存不足');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// const data = {\n\t\t\t// \tproduct_id: this.data._id,\n\t\t\t// \tnumber: this.$refs.skuPopup.buyNumber || 1,\n\t\t\t// \tsku: this.currentSku._id ? this.currentSku : this.data.sku[0]\n\t\t\t// };\n\t\t\tconst data = {\n\t\t\t\tgoods_id: this.data.id,\n\t\t\t\tnumber: this.$refs.skuPopup.buyNumber || 1\n\t\t\t\t// sku: this.currentSku._id ? this.currentSku : this.data.sku[0]\n\t\t\t};\n\t\t\treturn data;\n\t\t},\n\t\t//计算锚点参数\n\t\tasync calcAnchor() {\n\t\t\tconst size = await new Promise(res => {\n\t\t\t\tuni.createSelectorQuery()\n\t\t\t\t\t.select('#rating')\n\t\t\t\t\t.boundingClientRect(data => {\n\t\t\t\t\t\tres(data);\n\t\t\t\t\t})\n\t\t\t\t\t.exec();\n\t\t\t});\n\n\t\t\tconst headerHeight = this.systemInfo.statusBarHeight + this.systemInfo.navigationBarHeight;\n\t\t\tconst a1 = (size ? size.top : 0) - headerHeight;\n\t\t\tconst a2 = (size ? size.bottom : 0) + uni.upx2px(12) - headerHeight;\n\t\t\tthis.$refs.pageHeader.anchorList[1].top = a1;\n\t\t\tthis.$refs.pageHeader.anchorList[2].top = a2;\n\t\t\t_anchorList = [0, a1, a2];\n\t\t},\n\t\t//添加浏览历史\n\t\taddProductHistory() {\n\t\t\tconst data = this.data;\n\t\t\tlet list = uni.getStorageSync('productHistory');\n\t\t\tif (!list) {\n\t\t\t\tlist = [];\n\t\t\t}\n\t\t\tconst index = list.findIndex(item => item.id === data._id);\n\t\t\tif (index !== -1) {\n\t\t\t\tlist.splice(index, 1);\n\t\t\t}\n\t\t\tlist.unshift({\n\t\t\t\tid: data._id,\n\t\t\t\tthumb: data.thumb\n\t\t\t});\n\t\t\tuni.setStorageSync('productHistory', list);\n\t\t},\n\t\t//删除当前浏览历史\n\t\tdelHistory() {\n\t\t\tlet list = uni.getStorageSync('productHistory');\n\t\t\tif (!list) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst index = list.findIndex(item => item._id === data._id);\n\t\t\tif (index === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlist.splice(index, 1);\n\t\t\tuni.setStorageSync('productHistory', list);\n\t\t},\n\t\tshowPopup(key, type) {\n\t\t\tthis.$refs[key] && this.$refs[key].open(type);\n\t\t},\n\t\tonOprationClick(type) {\n\t\t\tthis.showPopup('skuPopup', type);\n\t\t},\n\t\tdoAppShare() {\n\t\t\tthis.$util.throttle(async () => {\n\t\t\t\tconst data = {\n\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\tscene: 'WXSceneSession',\n\t\t\t\t\ttype: 5,\n\t\t\t\t\timageUrl: this.data.thumb,\n\t\t\t\t\ttitle: this.data.title,\n\t\t\t\t\tminiProgram: {\n\t\t\t\t\t\tid: 'gh_3dada2e0f833',\n\t\t\t\t\t\tpath: '/pages/product/detail?id=' + this.data._id,\n\t\t\t\t\t\ttype: 0,\n\t\t\t\t\t\twebUrl: 'http://guoyunnet.com'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log('success:' + JSON.stringify(res));\n\t\t\t\t\t},\n\t\t\t\t\tfail: err => {\n\t\t\t\t\t\tconsole.log('fail:' + JSON.stringify(err));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tuni.share(data);\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style>\npage {\n\tbackground-color: #f5f5f5;\n}\n</style>\n<style scoped lang=\"scss\">\n.app {\n\tpadding-bottom: constant(safe-area-inset-bottom);\n\tpadding-bottom: env(safe-area-inset-bottom);\n\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\theight: 100rpx;\n\t}\n}\n/* 标题简介 */\n.introduce {\n\tbackground: #fff;\n\tpadding: 20rpx 30rpx;\n\n\t.title {\n\t\tmin-height: 44rpx;\n\t\tfont-size: 32rpx;\n\t\tcolor: #333;\n\t\tline-height: 44rpx;\n\t\tfont-weight: 700;\n\t}\n\t.price-wrap {\n\t\tmin-height: 40rpx;\n\t\tmargin-top: 28rpx;\n\t\tfont-size: 26rpx;\n\t}\n\t.m-price {\n\t\tmargin-left: 10rpx;\n\t\tmargin-right: 16rpx;\n\t\tcolor: #999;\n\t\ttext-decoration: line-through;\n\t}\n\t.tag {\n\t\ttransform: translateY(4rpx);\n\t\tpadding: 0 10rpx;\n\t\tmargin-left: 8rpx;\n\t\tbackground: $base-color;\n\t\tfont-size: 20rpx;\n\t\tcolor: #fff;\n\t\tline-height: 32rpx;\n\t\tborder-radius: 4rpx;\n\t\tposition: relative;\n\t\tbottom: 8rpx;\n\t}\n\t.bot {\n\t\tpadding: 28rpx 0 10rpx 4rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t}\n}\n/* 分享 */\n.share-wrap {\n\tbackground: linear-gradient(to right, #fdf5f6, #fbebf6);\n\theight: 76rpx;\n\tpadding: 0 30rpx;\n\tcolor: $base-color;\n\n\t.icon {\n\t\twidth: 90rpx;\n\t\theight: 30rpx;\n\t\tborder: 1px solid $base-color;\n\t\tborder-radius: 4rpx;\n\t\tposition: relative;\n\t\toverflow: hidden;\n\t\tfont-size: 22rpx;\n\n\t\t&:after {\n\t\t\tposition: absolute;\n\t\t\tleft: -20rpx;\n\t\t\ttop: -12rpx;\n\t\t\tcontent: '';\n\t\t\twidth: 50rpx;\n\t\t\theight: 50rpx;\n\t\t\tborder-radius: 50%;\n\t\t\tbackground-color: $base-color;\n\t\t}\n\t}\n\t.icon-iconfontxingxing {\n\t\tposition: relative;\n\t\tz-index: 1;\n\t\tfont-size: 24rpx;\n\t\tmargin-left: 2rpx;\n\t\tmargin-right: 10rpx;\n\t\tcolor: #fff;\n\t}\n\t.tit {\n\t\tflex: 1;\n\t\tfont-size: 26rpx;\n\t\tcolor: #666;\n\t\tmargin-left: 14rpx;\n\t}\n\t.icon-bangzhu1 {\n\t\tpadding: 10rpx;\n\t\tfont-size: 30rpx;\n\t\tdisplay: none;\n\t}\n\t.btn {\n\t\tpadding-left: 20rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: $base-color;\n\t}\n\t.icon-you {\n\t\tfont-size: 22rpx;\n\t\tmargin-left: 4rpx;\n\t\tcolor: $base-color;\n\t}\n}\n.c-list {\n\tfont-size: 26rpx;\n\tcolor: #888;\n\tbackground: #fff;\n\n\t.row {\n\t\tmin-height: 82rpx;\n\t\tpadding: 16rpx 30rpx;\n\t\tposition: relative;\n\n\t\t&:after {\n\t\t\tborder-color: #eaeaea;\n\t\t}\n\t\t&:last-child:after {\n\t\t\tborder: 0;\n\t\t}\n\t}\n\t.tit {\n\t\twidth: 140rpx;\n\t}\n\t.con {\n\t\tflex: 1;\n\t\tcolor: #333;\n\n\t\t.attr {\n\t\t\tmargin-right: 10rpx;\n\t\t}\n\t\t.service {\n\t\t\tmargin-right: 30rpx;\n\n\t\t\t&:last-child {\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t}\n\t}\n\t.con-list {\n\t\tcolor: #333;\n\n\t\ttext {\n\t\t\tline-height: 40rpx;\n\t\t}\n\t}\n\t.red {\n\t\tcolor: $base-color;\n\t}\n\t.icon-you {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t}\n}\n/* 评价 */\n.rating-wrap {\n\tpadding: 20rpx 30rpx 0rpx;\n\tbackground: #fff;\n\tmargin-top: 12rpx;\n\n\t&.no-data {\n\t\tpadding: 10rpx 30rpx 10rpx;\n\t}\n\t.e-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 70rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t}\n\t.tit {\n\t\tfont-size: 32rpx;\n\t\tcolor: #333;\n\t\tfont-weight: 700;\n\t\tmargin-right: 4rpx;\n\t}\n\t.tip {\n\t\tflex: 1;\n\t\tfont-size: 26rpx;\n\t\tcolor: #999;\n\t\ttext-align: right;\n\t}\n\t.icon-you {\n\t\tmargin-left: 8rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t}\n\t.mix-rating-item::after {\n\t\tborder: 0;\n\t}\n}\n/*  详情 */\n.detail-desc {\n\tmargin-top: 12rpx;\n\tbackground: #fff;\n\n\t.d-header {\n\t\theight: 80rpx;\n\t\tfont-size: 30rpx;\n\t\tcolor: #333;\n\n\t\ttext {\n\t\t\tmargin: 0 20rpx;\n\t\t}\n\t\t&:before,\n\t\t&:after {\n\t\t\tcontent: '';\n\t\t\twidth: 60rpx;\n\t\t\tborder-bottom: 1px solid #ccc;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1640589607384\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=1&id=0e9671aa&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=1&id=0e9671aa&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1640589608373\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}